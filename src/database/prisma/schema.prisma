///
/// @version v1.2.1
/// implements EDR-v1.1.1
///
generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

// Layer One | Main Entities

model User {
    // ids \/
    id       Int    @id @default(autoincrement())
    roleCode String @map("role_code")
    // ids /\

    // core \/
    firstName String @map("first_name")
    lastName  String @map("last_name")
    email     String @unique
    password  String
    company   String
    phone     String
    // core /\

    // support \/
    verifiedAt DateTime? @map("verified_at")
    createdAt  DateTime  @default(now()) @map("created_at")
    updatedAt  DateTime  @default(now()) @updatedAt @map("updated_at")
    // support /\

    // relations \/
    role           Role           @relation(fields: [roleCode], references: [code])
    userRecover    UserRecover?

    @@map("users")
}

model Role {
    id   Int    @id @default(autoincrement())
    code String @unique

    title       String
    description String

    users User[]

    @@map("roles")
}

model UserRecover {
    uuid   String @id @default(uuid())
    userId Int    @unique @map("user_id")

    expiredAt DateTime
    createdAt DateTime @default(now()) @map("created_at")
    updatedAt DateTime @default(now()) @updatedAt @map("updated_at")

    user User @relation(fields: [userId], references: [id])

    @@map("user_recover")
}

// Leayer Four | Enum
